name: ShellCheck
on: [push, pull_request]
jobs:
  shellcheck:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: ludeeus/action-shellcheck@master
      - name: Check for shell scripts
        id: check_files
        run: |
          if find . -type f -name "*.sh" | grep -q .;  then
            echo "shell_scripts_exist=true" >> $GITHUB_ENV
          else
            echo "shell_scripts_exist=false" >> $GITHUB_ENV
          fi

      - name: Run ShellCheck
        if: env.shell_scripts_exist == 'true'
        run: |
          find . -name "*.sh" -print0 | xargs -0 shellcheck -x -s bash -f gcc
